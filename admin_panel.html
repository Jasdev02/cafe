<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CafesOfBLR - Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        }

        h1 {
            color: #4c3fff;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            color: #4c3fff;
        }

        .tab-btn.active {
            color: #4c3fff;
            border-bottom-color: #4c3fff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: #333;
        }

        input[type="text"],
        input[type="number"],
        input[type="url"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #4c3fff;
        }

        .btn {
            background: #4c3fff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #3d2fd9;
        }

        .btn-secondary {
            background: #6c757d;
            margin-left: 10px;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .cafe-list {
            margin-top: 20px;
        }

        .cafe-item {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cafe-info {
            flex: 1;
        }

        .cafe-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cafe-meta {
            color: #666;
            font-size: 14px;
        }

        .cafe-actions {
            display: flex;
            gap: 10px;
        }

        .btn-edit,
        .btn-delete {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-edit {
            background: #4c3fff;
            color: white;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .json-preview {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 20px;
            overflow-x: auto;
        }

        pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .instructions {
            background: #e7f3ff;
            border-left: 4px solid #4c3fff;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .instructions h3 {
            margin-bottom: 10px;
            color: #4c3fff;
        }

        .instructions ul {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CafesOfBLR Admin Panel</h1>
        <p class="subtitle">Manage your cafe database</p>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('add')">Add New Cafe</button>
            <button class="tab-btn" onclick="switchTab('manage')">Manage Cafes</button>
            <button class="tab-btn" onclick="switchTab('export')">Export JSON</button>
        </div>

        <!-- Add Cafe Tab -->
        <div id="add-tab" class="tab-content active">
            <div class="instructions">
                <h3>üìù Adding a New Cafe</h3>
                <ul>
                    <li>Fill in all the cafe details below</li>
                    <li>Select appropriate tags/attributes</li>
                    <li>Copy the generated JSON and add it to your cafes_database.json file</li>
                </ul>
            </div>

            <form id="cafeForm">
                <div class="form-group">
                    <label>Cafe Name *</label>
                    <input type="text" id="cafeName" required>
                </div>

                <div class="form-group">
                    <label>Description *</label>
                    <textarea id="cafeDescription" required></textarea>
                </div>

                <div class="form-group">
                    <label>Image URL *</label>
                    <input type="url" id="cafeImage" placeholder="https://...">
                </div>

                <div class="form-group">
                    <label>Location *</label>
                    <select id="cafeLocation" required>
                        <option value="">Select location</option>
                        <option value="HSR">HSR</option>
                        <option value="Indiranagar">Indiranagar</option>
                        <option value="Koramangala">Koramangala</option>
                        <option value="Whitefield">Whitefield</option>
                        <option value="Jayanagar">Jayanagar</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Address *</label>
                    <input type="text" id="cafeAddress" required>
                </div>

                <div class="form-group">
                    <label>Phone</label>
                    <input type="text" id="cafePhone" placeholder="+91 80 1234 5678">
                </div>

                <div class="form-group">
                    <label>Hours</label>
                    <input type="text" id="cafeHours" placeholder="8:00 AM - 10:00 PM">
                </div>

                <div class="form-group">
                    <label>Rating (1-5) *</label>
                    <input type="number" id="cafeRating" min="1" max="5" step="0.1" required>
                </div>

                <div class="form-group">
                    <label>Price Range</label>
                    <select id="cafePriceRange">
                        <option value="‚Çπ">‚Çπ - Budget</option>
                        <option value="‚Çπ‚Çπ" selected>‚Çπ‚Çπ - Moderate</option>
                        <option value="‚Çπ‚Çπ‚Çπ">‚Çπ‚Çπ‚Çπ - Expensive</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Attributes/Tags *</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-ambience" value="ambience">
                            <label for="tag-ambience">Ambience</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-open-seating" value="open-seating">
                            <label for="tag-open-seating">Open Seating</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-parking" value="parking">
                            <label for="tag-parking">Parking</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-wifi" value="wifi">
                            <label for="tag-wifi">WiFi</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-outdoor" value="outdoor">
                            <label for="tag-outdoor">Outdoors</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-vegan" value="vegan">
                            <label for="tag-vegan">Vegan</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-quiet" value="quiet">
                            <label for="tag-quiet">Quiet</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-pets" value="pets">
                            <label for="tag-pets">Pets Friendly</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tag-scenic" value="scenic">
                            <label for="tag-scenic">Scenic</label>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn" onclick="generateJSON()">Generate JSON</button>
                <button type="button" class="btn btn-secondary" onclick="resetForm()">Clear Form</button>
            </form>

            <div id="jsonOutput" style="margin-top: 30px; display: none;">
                <h3>Generated JSON:</h3>
                <div class="json-preview">
                    <pre id="jsonCode"></pre>
                </div>
                <button class="btn" onclick="copyJSON()" style="margin-top: 15px;">Copy to Clipboard</button>
            </div>
        </div>

        <!-- Manage Cafes Tab -->
        <div id="manage-tab" class="tab-content">
            <div class="instructions">
                <h3>üè™ Manage Existing Cafes</h3>
                <ul>
                    <li>Upload your cafes_database.json file below</li>
                    <li>View and edit existing cafes</li>
                    <li>Download updated JSON when done</li>
                </ul>
            </div>

            <div class="form-group">
                <label>Upload cafes_database.json</label>
                <input type="file" id="jsonFileInput" accept=".json" onchange="loadJSONFile()">
            </div>

            <div id="cafeList" class="cafe-list">
                <p style="color: #666;">Upload a JSON file to manage cafes</p>
            </div>
        </div>

        <!-- Export Tab -->
        <div id="export-tab" class="tab-content">
            <div class="instructions">
                <h3>üì• Export Database</h3>
                <ul>
                    <li>View your complete database structure</li>
                    <li>Copy the JSON to update your cafes_database.json file</li>
                    <li>Or download as a new file</li>
                </ul>
            </div>

            <div id="fullJSONPreview" class="json-preview">
                <pre>Upload a JSON file in the "Manage Cafes" tab to view the full database</pre>
            </div>

            <button class="btn" onclick="downloadJSON()" style="margin-top: 15px;">Download JSON File</button>
        </div>
    </div>

    <script>
        let cafeDatabase = null;
        let nextId = 1;

        function switchTab(tabName) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Add active class to selected tab
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        function generateJSON() {
            const name = document.getElementById('cafeName').value;
            const description = document.getElementById('cafeDescription').value;
            const image = document.getElementById('cafeImage').value;
            const location = document.getElementById('cafeLocation').value;
            const address = document.getElementById('cafeAddress').value;
            const phone = document.getElementById('cafePhone').value;
            const hours = document.getElementById('cafeHours').value;
            const rating = parseFloat(document.getElementById('cafeRating').value);
            const priceRange = document.getElementById('cafePriceRange').value;

            // Get selected tags
            const tags = [];
            document.querySelectorAll('.checkbox-item input:checked').forEach(checkbox => {
                tags.push(checkbox.value);
            });

            if (!name || !description || !location || !rating) {
                alert('Please fill in all required fields');
                return;
            }

            const cafeObject = {
                id: nextId,
                name,
                description,
                image,
                rating,
                location,
                address,
                phone: phone || "+91 80 0000 0000",
                hours: hours || "9:00 AM - 9:00 PM",
                price_range: priceRange,
                tags
            };

            const jsonString = JSON.stringify(cafeObject, null, 2);
            document.getElementById('jsonCode').textContent = jsonString;
            document.getElementById('jsonOutput').style.display = 'block';

            nextId++;
        }

        function copyJSON() {
            const jsonCode = document.getElementById('jsonCode').textContent;
            navigator.clipboard.writeText(jsonCode).then(() => {
                alert('JSON copied to clipboard! You can now add it to your cafes_database.json file.');
            });
        }

        function resetForm() {
            document.getElementById('cafeForm').reset();
            document.getElementById('jsonOutput').style.display = 'none';
        }

        function loadJSONFile() {
            const file = document.getElementById('jsonFileInput').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        cafeDatabase = JSON.parse(e.target.result);
                        nextId = Math.max(...cafeDatabase.cafes.map(c => c.id)) + 1;
                        displayCafeList();
                        displayFullJSON();
                    } catch (error) {
                        alert('Error parsing JSON file: ' + error.message);
                    }
                };
                reader.readAsText(file);
            }
        }

        function displayCafeList() {
            const cafeList = document.getElementById('cafeList');
            cafeList.innerHTML = '';

            cafeDatabase.cafes.forEach(cafe => {
                const cafeItem = document.createElement('div');
                cafeItem.className = 'cafe-item';
                cafeItem.innerHTML = `
                    <div class="cafe-info">
                        <div class="cafe-name">${cafe.name}</div>
                        <div class="cafe-meta">${cafe.location} ‚Ä¢ ‚≠ê ${cafe.rating} ‚Ä¢ ${cafe.tags.join(', ')}</div>
                    </div>
                    <div class="cafe-actions">
                        <button class="btn-edit" onclick="editCafe(${cafe.id})">Edit</button>
                        <button class="btn-delete" onclick="deleteCafe(${cafe.id})">Delete</button>
                    </div>
                `;
                cafeList.appendChild(cafeItem);
            });
        }

        function displayFullJSON() {
            const preview = document.getElementById('fullJSONPreview');
            preview.innerHTML = `<pre>${JSON.stringify(cafeDatabase, null, 2)}</pre>`;
        }

        function editCafe(id) {
            alert('Edit functionality: In a full implementation, this would open a modal to edit the cafe details.');
        }

        function deleteCafe(id) {
            if (confirm('Are you sure you want to delete this cafe?')) {
                cafeDatabase.cafes = cafeDatabase.cafes.filter(cafe => cafe.id !== id);
                cafeDatabase.metadata.total_cafes = cafeDatabase.cafes.length;
                displayCafeList();
                displayFullJSON();
            }
        }

        function downloadJSON() {
            if (!cafeDatabase) {
                alert('Please upload a JSON file first');
                return;
            }

            const dataStr = JSON.stringify(cafeDatabase, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'cafes_database.json';
            link.click();
        }
    </script>
</body>
</html>